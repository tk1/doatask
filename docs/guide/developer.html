<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Developer Guide (client side) | Doatask</title>
    <meta name="description" content="Learning tool">
    <link rel="stylesheet" href="/doatask/assets/style.cac40d77.css">
    <link rel="modulepreload" href="/doatask/assets/Home.897e3f04.js">
    <link rel="modulepreload" href="/doatask/assets/app.f2cd33ff.js">
    <link rel="modulepreload" href="/doatask/assets/guide_developer.md.0c97fe23.lean.js">
    <link rel="modulepreload" href="/doatask/assets/app.f2cd33ff.js">
    <meta name="twitter:title" content="Developer Guide (client side) | Doatask">
    <meta property="og:title" content="Developer Guide (client side) | Doatask">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/doatask/" aria-label="Doatask, back to home" data-v-675d8756 data-v-4a583abe><!----> Doatask</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/doatask/guide/user" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/doatask/reference/data" data-v-b8818f8c>Reference <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/tk1/doatask" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/doatask/guide/user" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/doatask/reference/data" data-v-b8818f8c>Reference <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/tk1/doatask" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Guide</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/doatask/">What is Doatask?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/doatask/start">Getting started</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/doatask/concepts">Concepts</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/doatask/guide/user">User Guide</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/doatask/guide/developer">Developer Guide</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#architecture">Architecture</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#tools">Tools</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#vite">Vite</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#vue-js">Vue.js</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#primevue">Primevue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#lti">LTI</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pgadmin">pgAdmin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#develop-a-plugin-client-side">Develop a plugin (client side)</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#helpers-js">helpers.js</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#register">register</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#edit-component">Edit component</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#describe">describe</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#slots">Slots</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#solve-component">Solve component</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#develop-a-plugin-server-side">Develop a plugin (server side)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#user-roles">User Roles</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="developer-guide-client-side" tabindex="-1">Developer Guide (client side) <a class="header-anchor" href="#developer-guide-client-side" aria-hidden="true">#</a></h1><h2 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-hidden="true">#</a></h2><p>Doatask consists of a client web application (browser-based user interface) and a server responsible for business logic and data management. The user interface communicates with the server via a REST API.</p><p>The server is created with <a href="https://nestjs.com/" target="_blank" rel="noopener noreferrer">Nest</a>. It uses a <a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a> database for data storage.</p><h2 id="tools" tabindex="-1">Tools <a class="header-anchor" href="#tools" aria-hidden="true">#</a></h2><h3 id="vite" tabindex="-1">Vite <a class="header-anchor" href="#vite" aria-hidden="true">#</a></h3><p><a href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer">Vite</a> is used as a build tool.</p><h3 id="vue-js" tabindex="-1">Vue.js <a class="header-anchor" href="#vue-js" aria-hidden="true">#</a></h3><p>The user interface is developed with <a href="https://v3.vuejs.org/" target="_blank" rel="noopener noreferrer">Vue.js Version 3</a>.</p><h3 id="primevue" tabindex="-1">Primevue <a class="header-anchor" href="#primevue" aria-hidden="true">#</a></h3><p>The components for the user interface are taken from <a href="https://primefaces.org/primevue/" target="_blank" rel="noopener noreferrer">PrimeVue</a></p><h3 id="lti" tabindex="-1">LTI <a class="header-anchor" href="#lti" aria-hidden="true">#</a></h3><p>Doatask can operate as a external tool provider for learning platforms such as <a href="https://moodle.org" target="_blank" rel="noopener noreferrer">Moodle</a>. The platform must comply to Learning Tools Interoperability 1.3 (LTI).</p><blockquote><p>The IMS Learning Tools Interoperability® (LTI®) specification allows Learning Management Systems (LMS) or platforms to integrate remote tools and content in a standard way. <a href="https://www.imsglobal.org/spec/lti/v1p3/" target="_blank" rel="noopener noreferrer">ref</a></p></blockquote><p>The LTI integration is done by using <a href="https://cvmcosta.me/ltijs/" target="_blank" rel="noopener noreferrer">ltijs</a>. This tool uses LTI Version 1.3.</p><h2 id="pgadmin" tabindex="-1">pgAdmin <a class="header-anchor" href="#pgadmin" aria-hidden="true">#</a></h2><p>You can inspect the structure of the database and the contents of the database tables using the <a href="https://www.pgadmin.org/" target="_blank" rel="noopener noreferrer">pgAdmin</a> tool. The tool is provided as a web application.</p><p>If you want to login in pgAdmin, use the values of the environment variables <code>PGADMIN_DEFAULT_EMAIL</code> and <code>PGADMIN_DEFAULT_PASSWORD</code>.</p><p>These and the following environment variables are defined on the server side in the <code>.env</code> file.</p><p>pgAdmin is reachable under the default URL <a href="http://localhost:5555" target="_blank" rel="noopener noreferrer">http://localhost:5555</a>. The port can be set with the environment variable <code>PGADMIN_PORT</code>.</p><p>Click on &quot;Add New Server&quot; under &quot;Quick Links&quot;. You can give it any name. In the tab &quot;Connection&quot; fill in the following fields:</p><table><thead><tr><th>Field name</th><th>Value of environment variable</th></tr></thead><tbody><tr><td>Hostname/Address</td><td>POSTGRES_HOST</td></tr><tr><td>Port</td><td>POSTGRES_PORT</td></tr><tr><td>Maintenance database</td><td>POSTGRES_DB</td></tr><tr><td>Username</td><td>POSTGRES_USER</td></tr><tr><td>Password</td><td>POSTGRES_PASSWORD</td></tr></tbody></table><h2 id="develop-a-plugin-client-side" tabindex="-1">Develop a plugin (client side) <a class="header-anchor" href="#develop-a-plugin-client-side" aria-hidden="true">#</a></h2><p>If you wish to add a new type of tasks you have to implement a plugin. The plugin consists of two parts, one for the client side, one for the server side. Here we describe the development of the client plugin. For the server plugin see the server documentation.</p><p>In order to describe the development process, we choose an easy example. The new task type is as follows: the student is given two numbers and has to calculate the result of the divison. e.g. 28 and 4 are given. The result is of course 7. When the numbers are bigger, e.g. 1,234,567 and 123, the result is not so obvious. Therefore we will allow an estimate for the result, e.g. 10,000. If the estimate is near enough to the true result then the student will get a grade of 100%. If it&#39;s not so near the grade could be 40%. 0% are given if the difference is to big.</p><p>The grading will be done by the server plugin.</p><p>For the client plugin we need two Vue components: one to allow the teacher to create and edit a new task and one to present the student the task and let him fill in the result.</p><p>First we create a new directory for the plugin. This directory must be created as subdirectory of the directory plugins. Let&#39;s call it <code>Division</code>.</p><div class="language-"><pre><code>cd src/plugins
mkdir Division
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In this directory we create three files: <code>Edit.vue</code>, <code>Solve.vue</code> and <code>helpers.js</code>. <code>Edit.vue</code> defines the component for the teacher and <code>Solve.vue</code> defines the component for the student. <code>helpers.js</code> contains helper functions (see below). If necessary we can create further files and import them in the components.</p><h3 id="helpers-js" tabindex="-1">helpers.js <a class="header-anchor" href="#helpers-js" aria-hidden="true">#</a></h3><p>This file should export at least a function <code>describe</code>. This function get a parameter <code>details</code> that contains the details of the task. It should return a string describing the details. A generic (not task specific) implementation could be</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">describe</span> <span class="token punctuation">(</span><span class="token parameter">details</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>details<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This string will be used e.g. in the task list to show the details of each task.</p><h3 id="register" tabindex="-1">register <a class="header-anchor" href="#register" aria-hidden="true">#</a></h3><p>The components must be registered in the system. To do this, the <code>plugins/register.js</code> file must be extended. The following <code>import</code> statements must be added:</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">import</span> DivisionEdit <span class="token keyword">from</span> <span class="token string">&#39;./Division/Edit.vue&#39;</span>
<span class="token keyword">import</span> DivisionSolve <span class="token keyword">from</span> <span class="token string">&#39;./Division/Solve.vue&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> DivisionHelpers <span class="token keyword">from</span> <span class="token string">&#39;./Division/helpers.js&#39;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>In the <code>register</code> function a call to the <code>registerOne</code> function must be added.</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">registerOne</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token string">&#39;Division&#39;</span><span class="token punctuation">,</span> DivisionHelpers<span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#39;Edit&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> DivisionEdit
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#39;Solve&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> DivisionSolve
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>It is planned that the file <code>register.js</code> will be generated automatically in the future, so that this step will be omitted.</p></div><h3 id="edit-component" tabindex="-1">Edit component <a class="header-anchor" href="#edit-component" aria-hidden="true">#</a></h3><p>Let&#39;s start with the Edit component. There is a base component which we will use to define the Edit component. It&#39;s called <code>TaskEditBase</code>. This base component has a number of <a href="https://v3.vuejs.org/guide/component-slots.html" target="_blank" rel="noopener noreferrer">slots</a>. The new component can provide the content for these slots. We have at least to provide content for the named slot <code>details</code>. This slot should have the task specific fields that are needed to define the task.</p><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TaskEditBase</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#details</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p-fluid p-grid p-formgrid<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p-field p-col-12 p-md-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Number<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>InputText</span>
            <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task.details.number1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p-field p-col-12 p-md-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Number<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>InputText</span>
            <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number2<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task.details.number2<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TaskEditBase</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    modelValue<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      task<span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>task <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modelValue
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>In the details for the task, we have the two numbers <code>number1</code> and <code>number2</code>. The classes of the <code>div</code> are described in the documentation of <a href="https://primefaces.org/primevue/showcase/#/grid" target="_blank" rel="noopener noreferrer">PrimeVue</a>.</p><h3 id="describe" tabindex="-1">describe <a class="header-anchor" href="#describe" aria-hidden="true">#</a></h3><p>Now we can give a more specific implementation of the helper function <code>describe</code>.</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">describe</span> <span class="token punctuation">(</span><span class="token parameter">details</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>details<span class="token punctuation">.</span>number1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>details<span class="token punctuation">.</span>number2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="slots" tabindex="-1">Slots <a class="header-anchor" href="#slots" aria-hidden="true">#</a></h3><p>Beside the slot <code>details</code> there are the slots named <code>header</code> and <code>description</code>. <code>header</code> contains the header of the form and <code>description</code> the user interface element(s) for the description of the task.</p><p>We could define:</p><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Division task<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>and</p><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#description</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p-field p-col-12<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Description<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>InputText</span>
      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task.description<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="solve-component" tabindex="-1">Solve component <a class="header-anchor" href="#solve-component" aria-hidden="true">#</a></h3><p>Let&#39;s continue with the Solve component. There is a base component which we will use to define the Solve component. It&#39;s called <code>TaskSolveBase</code>. This base component has a number of <a href="https://v3.vuejs.org/guide/component-slots.html" target="_blank" rel="noopener noreferrer">slots</a>. The new component can provide the content for these slots. We have at least to provide content for the named slot <code>details</code>. This slot should have the task specific details that are needed to describe the task.</p><p>The minimal implementation for the Solve component is</p><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TaskSolveBase</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#details</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
        Divide {{ slotProps.task.details.number1 }}
        by {{ slotProps.task.details.number2 }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TaskSolveBase</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>This will show the title and the description of the task, a result field and a submit button. The task object is exposed via <code>slotProps</code> (see <a href="https://v3.vuejs.org/guide/component-slots.html#scoped-slots" target="_blank" rel="noopener noreferrer">Scoped slots</a>). So we can show the details to the student.</p><p>The <code>details</code> slot offers the slot props <code>task</code> and <code>alreadySubmitted</code>. <code>alreadySubmitted</code> is a boolean value that is true when this task in this assignment has already been submitted.</p><p>The base component <code>TaskSolveBase</code> has the slots:</p><ul><li><code>header</code></li><li><code>details</code></li><li><code>solution</code></li></ul><p><code>header</code> has the slot prop <code>task</code>.</p><p><code>solution</code> is a slot that allows us to implement a non-default interface for the submission of the solution and to give the student feedback on their submitted solution. This slot hat the slot props</p><ul><li><code>solution</code></li><li><code>task</code></li><li><code>submit</code></li><li><code>submitReceived</code></li><li><code>alreadySubmitted</code></li></ul><p><code>solution</code> is an object that is given to the <code>submit</code> function. It should contain the answer (solution) of the student. By default it has only the property <code>text</code>.</p><p><code>submit</code> is an async function that we can use to submit the answer of the student to the server. It has one argument that is an object with the properties <code>value</code>, the answer of the student, and <code>timeNeeded</code>, the time in seconds that the student needed to submit the answer.</p><p>The <code>submit</code> function returns the result of the grading process by the server. This result is an object with the properties <code>grade</code>, a value in the range from 0 to 1, and <code>feedback</code>, which is an object containing feedback for the student. We will determine the content of the <code>feedback</code> object when implementing the server plugin. When the task is rated there will be a property <code>rating</code> giving the new rating of the student.</p><p><code>submitReceived</code> is a function that will display a toast showing the grade the student received.</p><h2 id="develop-a-plugin-server-side" tabindex="-1">Develop a plugin (server side) <a class="header-anchor" href="#develop-a-plugin-server-side" aria-hidden="true">#</a></h2><p>If you wish to add a new type of tasks you have to implement a plugin. The plugin consists of two parts, one for the client side, one for the server side. Here we describe the development of the client plugin. For the client plugin see the client documentation.</p><p>In order to describe the development process, we choose an easy example. The new task type is as follows: the student is given two numbers and has to calculate the result of the divison. e.g. 28 and 4 are given. The result is of course 7. When the numbers are bigger, e.g. 1,234,567 and 123, the result is not so obvious. Therefore we will allow an estimate for the result, e.g. 10,000. If the estimate is near enough to the true result then the student will get a grade of 100%. If it&#39;s not so near the grade could be 40%. 0% are given if the difference is to big.</p><p>The grading will be done by the server plugin.</p><p>First we create a new directory for the plugin. This directory must be created as subdirectory of the directory plugins. On the client side the plugin is called <code>Division</code>. We must use the same name but in lower case.</p><div class="language-"><pre><code>cd src/plugins
mkdir division
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In this directory we create the file <code>main.ts</code> with the content</p><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Task <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;src/tasks/task.entity&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Submission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../submissions/submission.entity&#39;</span>

<span class="token keyword">function</span> <span class="token function">evaluate</span><span class="token punctuation">(</span>submission<span class="token operator">:</span> Submission<span class="token punctuation">,</span> task<span class="token operator">:</span> Task<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> solution<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> submission<span class="token punctuation">.</span>solution
  <span class="token keyword">let</span> details<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> task<span class="token punctuation">.</span>details

  <span class="token keyword">let</span> correct <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>details<span class="token punctuation">.</span>number1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">Number</span><span class="token punctuation">(</span>details<span class="token punctuation">.</span>number2<span class="token punctuation">)</span>
  <span class="token keyword">let</span> solutionValue <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>solution<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token keyword">let</span> diff <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>correct <span class="token operator">-</span> solutionValue<span class="token punctuation">)</span> <span class="token operator">/</span> correct

  <span class="token keyword">let</span> grade <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">-</span> diff<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    grade<span class="token punctuation">,</span>
    feedback<span class="token operator">:</span> <span class="token punctuation">{</span>
      correct<span class="token punctuation">,</span>
      diff
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> evaluate <span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>We have to define and export a function <code>evaluate</code>. This function gets the arguments <code>submission</code> and <code>task</code>. It has to return an object with the properties <code>grade</code>, a value in the range from 0 to 1 (i.e. 0% to 100%), and <code>feedback</code>, which is an object containing feedback for the student. <code>feedback</code> may have any properties. It is the responsibility of the client plugin to display this feedback object.</p><h2 id="user-roles" tabindex="-1">User Roles <a class="header-anchor" href="#user-roles" aria-hidden="true">#</a></h2><p>There are the roles <code>student</code>, <code>teacher</code> and <code>admin</code>. The <code>user</code> entity has the field <code>role</code> which contains one of these values.</p><p>Some API endpoints are secured by a RolesGuard. The roles are hierarchical, i.e. they are assigned as defined in <code>jwt.strategy.ts</code>:</p><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>user<span class="token punctuation">.</span>role<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token string">&#39;student&#39;</span><span class="token operator">:</span>
    roles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;student&#39;</span><span class="token punctuation">]</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token string">&#39;teacher&#39;</span><span class="token operator">:</span>
    roles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;teacher&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;student&#39;</span><span class="token punctuation">]</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token string">&#39;admin&#39;</span><span class="token operator">:</span>
    roles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;teacher&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;student&#39;</span><span class="token punctuation">]</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>Last Updated:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/doatask/guide/user" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>User Guide</span></a></div><div class="next" data-v-38ede35f><!----></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"concepts.md\":\"49a69e35\",\"guide_developer.md\":\"0c97fe23\",\"guide_user.md\":\"dcdeba39\",\"index.md\":\"58a38fbc\",\"reference_api.md\":\"1e9d56d9\",\"reference_data.md\":\"55b2df26\",\"start.md\":\"efcf5420\"}")</script>
    <script type="module" async src="/doatask/assets/app.f2cd33ff.js"></script>
    
  </body>
</html>